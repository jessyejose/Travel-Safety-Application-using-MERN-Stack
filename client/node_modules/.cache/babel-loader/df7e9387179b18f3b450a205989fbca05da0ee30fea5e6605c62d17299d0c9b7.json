{"ast":null,"code":"// import React, { useState, useEffect } from 'react';\n// import Navbar from './Navbar';\n// import Sos from './Sos';\n// import axios from 'axios';\n// import { useNavigate, Link } from 'react-router-dom'; // Import Link from react-router-dom\n\n// function Useractive() {\n//     const [activeTrips, setActiveTrips] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const navigate = useNavigate();\n\n//     useEffect(() => {\n//         const fetchData = async () => {\n//             try {\n//                 const token = JSON.parse(localStorage.getItem('data'));\n//                 const res = await axios.get('/auth/userdata', {\n//                     headers: {\n//                         Authorization: `Bearer ${token}`,\n//                     },\n//                 });\n//                 if (res.data.success) {\n//                     const response = await axios.get('/auth/formvalid');\n//                     const currentDate = new Date();\n//                     const filteredFormData = response.data.data.filter(form => {\n//                         const travelDateTime = new Date(form.travelDate);\n//                         const travelTimeParts = form.travelTime.split(':');\n//                         travelDateTime.setHours(parseInt(travelTimeParts[0]));\n//                         travelDateTime.setMinutes(parseInt(travelTimeParts[1]));\n\n//                         const returnDateTime = new Date(form.returnDate);\n//                         const returnTimeParts = form.returnTime.split(':');\n//                         returnDateTime.setHours(parseInt(returnTimeParts[0]));\n//                         returnDateTime.setMinutes(parseInt(returnTimeParts[1]));\n\n//                         return form.userId === res.data.data._id && form.approvalStatus === 1 && (form.tripStatus === undefined && form.status === undefined) &&\n//                             currentDate >= travelDateTime && currentDate <= returnDateTime;\n//                     });\n//                     setActiveTrips(filteredFormData.reverse());\n//                 } else {\n//                     navigate('/login');\n//                 }\n//                 setLoading(false);\n//             } catch (error) {\n//                 console.error('Error fetching data:', error);\n//             }\n//         };\n\n//         fetchData();\n//     }, [activeTrips]);\n\n//     return (\n//         <>\n//             <Navbar />\n//             <div className=\"container\">\n//                 <div className=\"row justify-content-center\">\n//                     {loading ? (\n//                         <div className=\"spinner-border text-primary\" role=\"status\">\n//                             <span className=\"visually-hidden\">Loading...</span>\n//                         </div>\n//                     ) : (\n//                         <>\n//                             {activeTrips.length <= 0 ? (\n//                                 <div style={{ textAlign: 'center', padding: '20px', background: '#f8d7da', color: '#721c24', borderRadius: '10px', border: '2px solid #f5c6cb', boxShadow: '0 0 10px rgba(0, 0, 0, 0.1)', marginTop: '250px' }}>\n//                                     <p style={{ fontSize: '20px', fontWeight: 'bold', marginBottom: '10px' }}>No active trips found.</p>\n//                                     <p style={{ fontSize: '16px', color: '#721c24' }}>Check back later for updates.</p>\n//                                 </div>\n//                             ) : (\n// \t\t\t\t\t\t\t\t<>\n//                                     <h2 style={{ textAlign: 'center', marginTop: '2rem', marginBottom: '3rem' }}>Active Trips</h2>\n//                                     {activeTrips.map(trip => (\n//                                         <div key={trip._id} className=\"col-md-5 mb-4\" >\n//                                             <div className=\"card shadow\" style={{ border: 'none',height:'500px' }}>\n//                                                 <div className=\"card-body\">\n//                                                     <div className=\"row\">\n//                                                         <div className=\"col-md-6\">\n//                                                             <img src={trip.photo} className=\"card-img-top rounded-circle mb-4\" alt=\"UserPhoto\" style={{ height: '150px' }} />\n//                                                             <p className=\"card-title\"><strong style={{ color: '#17a2b8' }}>User Name:</strong> {trip.name}</p>\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Age:</strong> {trip.age}</p>\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Source:</strong> {trip.sourceStation}</p>\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Destination:</strong> {trip.destinationStation}</p>\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Travel Date:</strong> {new Date(trip.travelDate).toLocaleDateString()}</p>\n//                                                         </div>\n//                                                         <div className=\"col-md-6\">\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Travel Time:</strong> {trip.travelTime}</p>\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Return Date:</strong> {new Date(trip.returnDate).toLocaleDateString()}</p>\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Return Time:</strong> {trip.returnTime}</p>\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Phone Number:</strong> {trip.phoneNumber}</p>\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Address:</strong> {trip.address}</p>\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Trip Reason:</strong> {trip.travelReason}</p>\n//                                                             <img src={trip.signature} className=\"card-img-top \" alt=\"UserPhoto\" style={{ height: '80px' }} />\n//                                                         </div>\n// \t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"d-flex justify-content-center mt-2\">\n// \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/map\" state={{ id: trip._id }} className=\"btn btn-primary\">Start</Link>\n// \t\t\t\t\t\t\t\t\t\t\t\t\t\t</div> \n//                                                     </div>\n//                                                 </div>\n//                                             </div>\n//                                         </div>\n//                                     ))}\n//                                 </>\n//                             )}\n//                         </>\n//                     )}\n//                 </div>\n//             </div>\n//             <Sos />\n//         </>\n//     );\n// }\n\n// export default Useractive;","map":{"version":3,"names":[],"sources":["D:/SecureExplorer/client/src/user/Useractive.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\r\n// import Navbar from './Navbar';\r\n// import Sos from './Sos';\r\n// import axios from 'axios';\r\n// import { useNavigate, Link } from 'react-router-dom'; // Import Link from react-router-dom\r\n\r\n// function Useractive() {\r\n//     const [activeTrips, setActiveTrips] = useState([]);\r\n//     const [loading, setLoading] = useState(true);\r\n//     const navigate = useNavigate();\r\n\r\n//     useEffect(() => {\r\n//         const fetchData = async () => {\r\n//             try {\r\n//                 const token = JSON.parse(localStorage.getItem('data'));\r\n//                 const res = await axios.get('/auth/userdata', {\r\n//                     headers: {\r\n//                         Authorization: `Bearer ${token}`,\r\n//                     },\r\n//                 });\r\n//                 if (res.data.success) {\r\n//                     const response = await axios.get('/auth/formvalid');\r\n//                     const currentDate = new Date();\r\n//                     const filteredFormData = response.data.data.filter(form => {\r\n//                         const travelDateTime = new Date(form.travelDate);\r\n//                         const travelTimeParts = form.travelTime.split(':');\r\n//                         travelDateTime.setHours(parseInt(travelTimeParts[0]));\r\n//                         travelDateTime.setMinutes(parseInt(travelTimeParts[1]));\r\n\r\n//                         const returnDateTime = new Date(form.returnDate);\r\n//                         const returnTimeParts = form.returnTime.split(':');\r\n//                         returnDateTime.setHours(parseInt(returnTimeParts[0]));\r\n//                         returnDateTime.setMinutes(parseInt(returnTimeParts[1]));\r\n\r\n//                         return form.userId === res.data.data._id && form.approvalStatus === 1 && (form.tripStatus === undefined && form.status === undefined) &&\r\n//                             currentDate >= travelDateTime && currentDate <= returnDateTime;\r\n//                     });\r\n//                     setActiveTrips(filteredFormData.reverse());\r\n//                 } else {\r\n//                     navigate('/login');\r\n//                 }\r\n//                 setLoading(false);\r\n//             } catch (error) {\r\n//                 console.error('Error fetching data:', error);\r\n//             }\r\n//         };\r\n\r\n//         fetchData();\r\n//     }, [activeTrips]);\r\n\r\n//     return (\r\n//         <>\r\n//             <Navbar />\r\n//             <div className=\"container\">\r\n//                 <div className=\"row justify-content-center\">\r\n//                     {loading ? (\r\n//                         <div className=\"spinner-border text-primary\" role=\"status\">\r\n//                             <span className=\"visually-hidden\">Loading...</span>\r\n//                         </div>\r\n//                     ) : (\r\n//                         <>\r\n//                             {activeTrips.length <= 0 ? (\r\n//                                 <div style={{ textAlign: 'center', padding: '20px', background: '#f8d7da', color: '#721c24', borderRadius: '10px', border: '2px solid #f5c6cb', boxShadow: '0 0 10px rgba(0, 0, 0, 0.1)', marginTop: '250px' }}>\r\n//                                     <p style={{ fontSize: '20px', fontWeight: 'bold', marginBottom: '10px' }}>No active trips found.</p>\r\n//                                     <p style={{ fontSize: '16px', color: '#721c24' }}>Check back later for updates.</p>\r\n//                                 </div>\r\n//                             ) : (\r\n// \t\t\t\t\t\t\t\t<>\r\n//                                     <h2 style={{ textAlign: 'center', marginTop: '2rem', marginBottom: '3rem' }}>Active Trips</h2>\r\n//                                     {activeTrips.map(trip => (\r\n//                                         <div key={trip._id} className=\"col-md-5 mb-4\" >\r\n//                                             <div className=\"card shadow\" style={{ border: 'none',height:'500px' }}>\r\n//                                                 <div className=\"card-body\">\r\n//                                                     <div className=\"row\">\r\n//                                                         <div className=\"col-md-6\">\r\n//                                                             <img src={trip.photo} className=\"card-img-top rounded-circle mb-4\" alt=\"UserPhoto\" style={{ height: '150px' }} />\r\n//                                                             <p className=\"card-title\"><strong style={{ color: '#17a2b8' }}>User Name:</strong> {trip.name}</p>\r\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Age:</strong> {trip.age}</p>\r\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Source:</strong> {trip.sourceStation}</p>\r\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Destination:</strong> {trip.destinationStation}</p>\r\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Travel Date:</strong> {new Date(trip.travelDate).toLocaleDateString()}</p>\r\n//                                                         </div>\r\n//                                                         <div className=\"col-md-6\">\r\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Travel Time:</strong> {trip.travelTime}</p>\r\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Return Date:</strong> {new Date(trip.returnDate).toLocaleDateString()}</p>\r\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Return Time:</strong> {trip.returnTime}</p>\r\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Phone Number:</strong> {trip.phoneNumber}</p>\r\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Address:</strong> {trip.address}</p>\r\n//                                                             <p className=\"card-text\"><strong style={{ color: '#17a2b8' }}>Trip Reason:</strong> {trip.travelReason}</p>\r\n//                                                             <img src={trip.signature} className=\"card-img-top \" alt=\"UserPhoto\" style={{ height: '80px' }} />\r\n//                                                         </div>\r\n// \t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"d-flex justify-content-center mt-2\">\r\n// \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/map\" state={{ id: trip._id }} className=\"btn btn-primary\">Start</Link>\r\n// \t\t\t\t\t\t\t\t\t\t\t\t\t\t</div> \r\n//                                                     </div>\r\n//                                                 </div>\r\n//                                             </div>\r\n//                                         </div>\r\n//                                     ))}\r\n//                                 </>\r\n//                             )}\r\n//                         </>\r\n//                     )}\r\n//                 </div>\r\n//             </div>\r\n//             <Sos />\r\n//         </>\r\n//     );\r\n// }\r\n\r\n// export default Useractive;\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}