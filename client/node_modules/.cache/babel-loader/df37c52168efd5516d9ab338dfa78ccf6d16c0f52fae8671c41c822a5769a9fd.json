{"ast":null,"code":"var _jsxFileName = \"D:\\\\SecureExplorer\\\\client\\\\src\\\\user\\\\MapComponent.js\",\n  _s = $RefreshSig$();\n// import React, { useState, useEffect, useRef } from 'react';\n// import Navbar from './Navbar';\n// import Sos from './Sos';\n// import axios from 'axios';\n// import L from 'leaflet';\n// import 'leaflet-routing-machine';\n// import { useLocation, useNavigate } from 'react-router-dom';\n// import { ToastContainer, toast } from 'react-toastify';\n// import 'react-toastify/dist/ReactToastify.css';\n\n// const MapComponent = () => {\n//     const mapRef = useRef(null);\n//     const [data, setData] = useState({});\n//     const [error, setError] = useState(null);\n//     const [sourceCoordinates, setSourceCoordinates] = useState(null);\n//     const [destinationCoordinates, setDestinationCoordinates] = useState(null);\n//     const [userIconMarker, setUserIconMarker] = useState(null);\n//     const [routingControl, setRoutingControl] = useState(null); \n//     const [isNavigated, setIsNavigated] = useState(false); \n//     const navigate = useNavigate();\n//     const location = useLocation();\n\n//     const fetchData = async () => {\n//         try {\n//             const response = await axios.post('http://localhost:5000/auth/viewtripbyid', { id: location.state.id });\n//             setData(response.data);\n\n//             if (response.data.sourceStation && response.data.destinationStation) {\n//                 const sourceResult = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${response.data.sourceStation}`);\n//                 const destinationResult = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${response.data.destinationStation}`);\n//                 if (sourceResult.data.length > 0 && destinationResult.data.length > 0) {\n//                     setSourceCoordinates([parseFloat(sourceResult.data[0].lat), parseFloat(sourceResult.data[0].lon)]);\n//                     setDestinationCoordinates([parseFloat(destinationResult.data[0].lat), parseFloat(destinationResult.data[0].lon)]);\n//                 } else {\n//                     setError(\"Source or destination coordinates not found\");\n//                 }\n//             }\n//         } catch (error) {\n//             setError(error.message);\n//         }\n//     };\n\n//     useEffect(() => {\n//         fetchData();\n//     }, [location.state.id]);\n\n//     useEffect(() => {\n//         if (sourceCoordinates && destinationCoordinates) {\n//             if (!mapRef.current) {\n//                 mapRef.current = L.map('map').setView(sourceCoordinates, 11);\n//                 const mapLink = \"<a href='http://openstreetmap.org'>OpenStreetMap</a>\";\n//                 L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\n//                     attribution: 'Leaflet &copy; ' + mapLink + ', contribution',\n//                     maxZoom: 18\n//                 }).addTo(mapRef.current);\n//             }\n\n//             const map = mapRef.current;\n\n//             // Add polyline to show shortest road between source and destination\n//             const control = L.Routing.control({\n//                 waypoints: [\n//                     L.latLng(sourceCoordinates),\n//                     L.latLng(destinationCoordinates)\n//                 ],\n//                 routeWhileDragging: true,\n//                 lineOptions: {\n//                     styles: [{ color: 'red', opacity: 0.7, weight: 5 }]\n//                 },\n//                 createMarker: function () { return null; }\n//             });\n//             setRoutingControl(control.addTo(map));\n\n//             // Add marker for source and destination\n//             L.marker(sourceCoordinates).addTo(map)\n//                 .bindPopup(`<b>Source:</b> ${data.sourceStation}`);\n\n//             L.marker(destinationCoordinates).addTo(map)\n//                 .bindPopup(`<b>Destination:</b> ${data.destinationStation}`);\n\n//             // Initialize user icon marker\n//             const userIcon = L.icon({\n//                 iconUrl: data.photo,\n//                 iconSize: [40, 40],\n//             });\n//             setUserIconMarker(L.marker(sourceCoordinates, { icon: userIcon }).addTo(map));\n\n//             map.fitBounds([sourceCoordinates, destinationCoordinates]);\n//         }\n//     }, [sourceCoordinates, destinationCoordinates]);\n\n//     useEffect(() => {\n//         if (userIconMarker && routingControl ) {\n//             // Animate user icon marker along the route\n//             routingControl.on('routesfound', function (e) {\n//                 const route = e.routes[0];\n//                 const index = 0;\n//                 const segment = route.coordinates[index];\n//                 moveMarker(segment, index + 1, route);\n//             });\n//         }\n//     }, [userIconMarker, routingControl, sourceCoordinates, destinationCoordinates, ]);\n\n//     const displayCoordinates = async () => {\n//         if (userIconMarker) {\n//             const coordinates = userIconMarker.getLatLng();\n//             const response = await axios.get(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${coordinates.lat}&lon=${coordinates.lng}`);\n//             const placeInfo = response.data.address;\n//             const stateDistrict = placeInfo.state_district;\n\n//             try {\n//                 const userId = data._id;\n//                 await axios.post('http://localhost:5000/auth/submitalert', {\n//                     userId: userId,\n//                     coordinates: {\n//                         stateDistrict: stateDistrict \n//                     },\n\n//                 });\n//             } catch (error) {\n//                 console.error('Error saving SOS request:', error);\n//             }\n// \t\t\tsetIsNavigated(true);\n//             alert(`You are in ${stateDistrict}. Help will arrive in a few minutes.`);\n//             navigate('/userhelp', { state: { data } });\n\n//         }\n//     };\n\n// \tlet destinationReached = false; \n\n//     async function moveMarker(segment, index, route) {\n//         setTimeout(async function () {\n//             if (!isNavigated) {\n//                 userIconMarker.setLatLng(L.latLng(segment.lat, segment.lng));\n//                 if (index < route.coordinates.length) {\n//                     moveMarker(route.coordinates[index], index + 1, route);\n//                 } else {\n//                     try {\n// \t\t\t\t\t\tif (!destinationReached) {\n// \t\t\t\t\t\t\ttoast.success(\"You have reached the destination successfully!\", {\n// \t\t\t\t\t\t\t\ttoastId: 'destinationToast',\n// \t\t\t\t\t\t\t\tonClose: async () => {\n// \t\t\t\t\t\t\t\t\tdestinationReached = true;\n// \t\t\t\t\t\t\t\t\ttry {\n// \t\t\t\t\t\t\t\t\t\tconst userId = data._id;\n// \t\t\t\t\t\t\t\t\t\tawait axios.post('http://localhost:5000/auth/submitstatus', {\n// \t\t\t\t\t\t\t\t\t\t\tuserId: userId,\n// \t\t\t\t\t\t\t\t\t\t\ttripStatus: 1\n// \t\t\t\t\t\t\t\t\t\t});\n// \t\t\t\t\t\t\t\t\t\tconsole.log(\"Navigating to '/userhistory'...\");\n// \t\t\t\t\t\t\t\t\t\tnavigate('/userhistory');\n// \t\t\t\t\t\t\t\t\t} catch (error) {\n// \t\t\t\t\t\t\t\t\t\tconsole.error(error);\n// \t\t\t\t\t\t\t\t\t}\n// \t\t\t\t\t\t\t\t\tdestinationReached = true;\n// \t\t\t\t\t\t\t\t}\n// \t\t\t\t\t\t\t});\n// \t\t\t\t\t\t}\n//                     } catch (error) {\n//                         console.error(error);\n//                     }                \n//                 }\n//             }\n//         }, 2); \n//     }\n\n//     return (\n//         <>\n//             <Navbar />\n//             <div>\n//                 {error ? (\n//                     <div>Error: {error}</div>\n//                 ) : (\n//                     <div id=\"map\" style={{ width: '100%', height: '100vh' }}></div>\n//                 )}\n//             </div>\n//             <Sos displayCoordinates={displayCoordinates} />\n//             <ToastContainer />\n//         </>\n//     );\n// }\n\n// export default MapComponent;\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Navbar from './Navbar';\nimport Sos from './Sos';\nimport axios from 'axios';\nimport L from 'leaflet';\nimport 'leaflet-routing-machine';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MapComponent = () => {\n  _s();\n  const mapRef = useRef(null);\n  const [data, setData] = useState({});\n  const [error, setError] = useState(null);\n  const [sourceCoordinates, setSourceCoordinates] = useState(null);\n  const [destinationCoordinates, setDestinationCoordinates] = useState(null);\n  const [routingControl, setRoutingControl] = useState(null);\n  const [isNavigated, setIsNavigated] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const fetchData = async () => {\n    try {\n      const response = await axios.post('http://localhost:5000/auth/viewtripbyid', {\n        id: location.state.id\n      });\n      setData(response.data);\n      if (response.data.sourceStation && response.data.destinationStation) {\n        const sourceResult = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${response.data.sourceStation}`);\n        const destinationResult = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${response.data.destinationStation}`);\n        if (sourceResult.data.length > 0 && destinationResult.data.length > 0) {\n          setSourceCoordinates([parseFloat(sourceResult.data[0].lat), parseFloat(sourceResult.data[0].lon)]);\n          setDestinationCoordinates([parseFloat(destinationResult.data[0].lat), parseFloat(destinationResult.data[0].lon)]);\n        } else {\n          setError(\"Source or destination coordinates not found\");\n        }\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, [location.state.id]);\n  useEffect(() => {\n    if (sourceCoordinates && destinationCoordinates) {\n      if (!mapRef.current) {\n        mapRef.current = L.map('map').setView(sourceCoordinates, 11);\n        const mapLink = \"<a href='http://openstreetmap.org'>OpenStreetMap</a>\";\n        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\n          attribution: 'Leaflet &copy; ' + mapLink + ', contribution',\n          maxZoom: 18\n        }).addTo(mapRef.current);\n      }\n      const map = mapRef.current;\n\n      // Add polyline to show shortest road between source and destination\n      const control = L.Routing.control({\n        waypoints: [L.latLng(sourceCoordinates), L.latLng(destinationCoordinates)],\n        routeWhileDragging: true,\n        lineOptions: {\n          styles: [{\n            color: 'red',\n            opacity: 0.7,\n            weight: 5\n          }]\n        },\n        createMarker: function () {\n          return null;\n        }\n      });\n      setRoutingControl(control.addTo(map));\n\n      // Add marker for source and destination\n      L.marker(sourceCoordinates).addTo(map).bindPopup(`<b>Source:</b> ${data.sourceStation}`);\n      L.marker(destinationCoordinates).addTo(map).bindPopup(`<b>Destination:</b> ${data.destinationStation}`);\n      map.fitBounds([sourceCoordinates, destinationCoordinates]);\n    }\n  }, [sourceCoordinates, destinationCoordinates]);\n  useEffect(() => {\n    if (routingControl) {\n      // Animate user icon marker along the route\n      routingControl.on('routesfound', function (e) {\n        const route = e.routes[0];\n        const index = 0;\n        const segment = route.coordinates[index];\n        moveMarker(segment, index + 1, route);\n      });\n    }\n  }, [routingControl]);\n  const displayCoordinates = async () => {\n    if (userIconMarker) {\n      const coordinates = userIconMarker.getLatLng();\n      const response = await axios.get(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${coordinates.lat}&lon=${coordinates.lng}`);\n      const placeInfo = response.data.address;\n      const stateDistrict = placeInfo.state_district;\n      try {\n        const userId = data._id;\n        await axios.post('http://localhost:5000/auth/submitalert', {\n          userId: userId,\n          coordinates: {\n            stateDistrict: stateDistrict\n          }\n        });\n      } catch (error) {\n        console.error('Error saving SOS request:', error);\n      }\n      setIsNavigated(true);\n      alert(`You are in ${stateDistrict}. Help will arrive in a few minutes.`);\n      navigate('/userhelp', {\n        state: {\n          data\n        }\n      });\n    }\n  };\n  let userIconMarker = null; // Declaring userIconMarker outside useEffect\n\n  async function moveMarker(segment, index, route) {\n    setTimeout(async function () {\n      if (!isNavigated) {\n        if (!userIconMarker) {\n          const userIcon = L.icon({\n            iconUrl: data.photo,\n            iconSize: [40, 40]\n          });\n          userIconMarker = L.marker(L.latLng(segment.lat, segment.lng), {\n            icon: userIcon\n          }).addTo(mapRef.current);\n        } else {\n          userIconMarker.setLatLng(L.latLng(segment.lat, segment.lng));\n        }\n        if (index < route.coordinates.length) {\n          moveMarker(route.coordinates[index], index + 1, route);\n        } else {\n          try {\n            if (!destinationReached) {\n              toast.success(\"You have reached the destination successfully!\", {\n                toastId: 'destinationToast',\n                onClose: async () => {\n                  destinationReached = true;\n                  try {\n                    const userId = data._id;\n                    await axios.post('http://localhost:5000/auth/submitstatus', {\n                      userId: userId,\n                      tripStatus: 1\n                    });\n                    console.log(\"Navigating to '/userhistory'...\");\n                    navigate('/userhistory');\n                  } catch (error) {\n                    console.error(error);\n                  }\n                  destinationReached = true;\n                }\n              });\n            }\n          } catch (error) {\n            console.error(error);\n          }\n        }\n      }\n    }, 2);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Error: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"map\",\n        style: {\n          width: '100%',\n          height: '100vh'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Sos, {\n      displayCoordinates: displayCoordinates\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(MapComponent, \"+ok+21zVWV/pbLvPSgfmzIudrBo=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Navbar","Sos","axios","L","useLocation","useNavigate","ToastContainer","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","MapComponent","_s","mapRef","data","setData","error","setError","sourceCoordinates","setSourceCoordinates","destinationCoordinates","setDestinationCoordinates","routingControl","setRoutingControl","isNavigated","setIsNavigated","navigate","location","fetchData","response","post","id","state","sourceStation","destinationStation","sourceResult","get","destinationResult","length","parseFloat","lat","lon","message","current","map","setView","mapLink","tileLayer","attribution","maxZoom","addTo","control","Routing","waypoints","latLng","routeWhileDragging","lineOptions","styles","color","opacity","weight","createMarker","marker","bindPopup","fitBounds","on","e","route","routes","index","segment","coordinates","moveMarker","displayCoordinates","userIconMarker","getLatLng","lng","placeInfo","address","stateDistrict","state_district","userId","_id","console","alert","setTimeout","userIcon","icon","iconUrl","photo","iconSize","setLatLng","destinationReached","success","toastId","onClose","tripStatus","log","children","fileName","_jsxFileName","lineNumber","columnNumber","style","width","height","_c","$RefreshReg$"],"sources":["D:/SecureExplorer/client/src/user/MapComponent.js"],"sourcesContent":["// import React, { useState, useEffect, useRef } from 'react';\r\n// import Navbar from './Navbar';\r\n// import Sos from './Sos';\r\n// import axios from 'axios';\r\n// import L from 'leaflet';\r\n// import 'leaflet-routing-machine';\r\n// import { useLocation, useNavigate } from 'react-router-dom';\r\n// import { ToastContainer, toast } from 'react-toastify';\r\n// import 'react-toastify/dist/ReactToastify.css';\r\n\r\n// const MapComponent = () => {\r\n//     const mapRef = useRef(null);\r\n//     const [data, setData] = useState({});\r\n//     const [error, setError] = useState(null);\r\n//     const [sourceCoordinates, setSourceCoordinates] = useState(null);\r\n//     const [destinationCoordinates, setDestinationCoordinates] = useState(null);\r\n//     const [userIconMarker, setUserIconMarker] = useState(null);\r\n//     const [routingControl, setRoutingControl] = useState(null); \r\n//     const [isNavigated, setIsNavigated] = useState(false); \r\n//     const navigate = useNavigate();\r\n//     const location = useLocation();\r\n\r\n//     const fetchData = async () => {\r\n//         try {\r\n//             const response = await axios.post('http://localhost:5000/auth/viewtripbyid', { id: location.state.id });\r\n//             setData(response.data);\r\n\r\n//             if (response.data.sourceStation && response.data.destinationStation) {\r\n//                 const sourceResult = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${response.data.sourceStation}`);\r\n//                 const destinationResult = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${response.data.destinationStation}`);\r\n//                 if (sourceResult.data.length > 0 && destinationResult.data.length > 0) {\r\n//                     setSourceCoordinates([parseFloat(sourceResult.data[0].lat), parseFloat(sourceResult.data[0].lon)]);\r\n//                     setDestinationCoordinates([parseFloat(destinationResult.data[0].lat), parseFloat(destinationResult.data[0].lon)]);\r\n//                 } else {\r\n//                     setError(\"Source or destination coordinates not found\");\r\n//                 }\r\n//             }\r\n//         } catch (error) {\r\n//             setError(error.message);\r\n//         }\r\n//     };\r\n\r\n//     useEffect(() => {\r\n//         fetchData();\r\n//     }, [location.state.id]);\r\n\r\n//     useEffect(() => {\r\n//         if (sourceCoordinates && destinationCoordinates) {\r\n//             if (!mapRef.current) {\r\n//                 mapRef.current = L.map('map').setView(sourceCoordinates, 11);\r\n//                 const mapLink = \"<a href='http://openstreetmap.org'>OpenStreetMap</a>\";\r\n//                 L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\r\n//                     attribution: 'Leaflet &copy; ' + mapLink + ', contribution',\r\n//                     maxZoom: 18\r\n//                 }).addTo(mapRef.current);\r\n//             }\r\n\r\n//             const map = mapRef.current;\r\n\r\n//             // Add polyline to show shortest road between source and destination\r\n//             const control = L.Routing.control({\r\n//                 waypoints: [\r\n//                     L.latLng(sourceCoordinates),\r\n//                     L.latLng(destinationCoordinates)\r\n//                 ],\r\n//                 routeWhileDragging: true,\r\n//                 lineOptions: {\r\n//                     styles: [{ color: 'red', opacity: 0.7, weight: 5 }]\r\n//                 },\r\n//                 createMarker: function () { return null; }\r\n//             });\r\n//             setRoutingControl(control.addTo(map));\r\n\r\n//             // Add marker for source and destination\r\n//             L.marker(sourceCoordinates).addTo(map)\r\n//                 .bindPopup(`<b>Source:</b> ${data.sourceStation}`);\r\n\r\n//             L.marker(destinationCoordinates).addTo(map)\r\n//                 .bindPopup(`<b>Destination:</b> ${data.destinationStation}`);\r\n\r\n//             // Initialize user icon marker\r\n//             const userIcon = L.icon({\r\n//                 iconUrl: data.photo,\r\n//                 iconSize: [40, 40],\r\n//             });\r\n//             setUserIconMarker(L.marker(sourceCoordinates, { icon: userIcon }).addTo(map));\r\n\r\n//             map.fitBounds([sourceCoordinates, destinationCoordinates]);\r\n//         }\r\n//     }, [sourceCoordinates, destinationCoordinates]);\r\n\r\n//     useEffect(() => {\r\n//         if (userIconMarker && routingControl ) {\r\n//             // Animate user icon marker along the route\r\n//             routingControl.on('routesfound', function (e) {\r\n//                 const route = e.routes[0];\r\n//                 const index = 0;\r\n//                 const segment = route.coordinates[index];\r\n//                 moveMarker(segment, index + 1, route);\r\n//             });\r\n//         }\r\n//     }, [userIconMarker, routingControl, sourceCoordinates, destinationCoordinates, ]);\r\n\r\n//     const displayCoordinates = async () => {\r\n//         if (userIconMarker) {\r\n//             const coordinates = userIconMarker.getLatLng();\r\n//             const response = await axios.get(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${coordinates.lat}&lon=${coordinates.lng}`);\r\n//             const placeInfo = response.data.address;\r\n//             const stateDistrict = placeInfo.state_district;\r\n            \r\n//             try {\r\n//                 const userId = data._id;\r\n//                 await axios.post('http://localhost:5000/auth/submitalert', {\r\n//                     userId: userId,\r\n//                     coordinates: {\r\n//                         stateDistrict: stateDistrict \r\n//                     },\r\n\r\n//                 });\r\n//             } catch (error) {\r\n//                 console.error('Error saving SOS request:', error);\r\n//             }\r\n// \t\t\tsetIsNavigated(true);\r\n//             alert(`You are in ${stateDistrict}. Help will arrive in a few minutes.`);\r\n//             navigate('/userhelp', { state: { data } });\r\n\r\n//         }\r\n//     };\r\n\r\n// \tlet destinationReached = false; \r\n\r\n//     async function moveMarker(segment, index, route) {\r\n//         setTimeout(async function () {\r\n//             if (!isNavigated) {\r\n//                 userIconMarker.setLatLng(L.latLng(segment.lat, segment.lng));\r\n//                 if (index < route.coordinates.length) {\r\n//                     moveMarker(route.coordinates[index], index + 1, route);\r\n//                 } else {\r\n//                     try {\r\n// \t\t\t\t\t\tif (!destinationReached) {\r\n// \t\t\t\t\t\t\ttoast.success(\"You have reached the destination successfully!\", {\r\n// \t\t\t\t\t\t\t\ttoastId: 'destinationToast',\r\n// \t\t\t\t\t\t\t\tonClose: async () => {\r\n// \t\t\t\t\t\t\t\t\tdestinationReached = true;\r\n// \t\t\t\t\t\t\t\t\ttry {\r\n// \t\t\t\t\t\t\t\t\t\tconst userId = data._id;\r\n// \t\t\t\t\t\t\t\t\t\tawait axios.post('http://localhost:5000/auth/submitstatus', {\r\n// \t\t\t\t\t\t\t\t\t\t\tuserId: userId,\r\n// \t\t\t\t\t\t\t\t\t\t\ttripStatus: 1\r\n// \t\t\t\t\t\t\t\t\t\t});\r\n// \t\t\t\t\t\t\t\t\t\tconsole.log(\"Navigating to '/userhistory'...\");\r\n// \t\t\t\t\t\t\t\t\t\tnavigate('/userhistory');\r\n// \t\t\t\t\t\t\t\t\t} catch (error) {\r\n// \t\t\t\t\t\t\t\t\t\tconsole.error(error);\r\n// \t\t\t\t\t\t\t\t\t}\r\n// \t\t\t\t\t\t\t\t\tdestinationReached = true;\r\n// \t\t\t\t\t\t\t\t}\r\n// \t\t\t\t\t\t\t});\r\n// \t\t\t\t\t\t}\r\n//                     } catch (error) {\r\n//                         console.error(error);\r\n//                     }                \r\n//                 }\r\n//             }\r\n//         }, 2); \r\n//     }\r\n\r\n//     return (\r\n//         <>\r\n//             <Navbar />\r\n//             <div>\r\n//                 {error ? (\r\n//                     <div>Error: {error}</div>\r\n//                 ) : (\r\n//                     <div id=\"map\" style={{ width: '100%', height: '100vh' }}></div>\r\n//                 )}\r\n//             </div>\r\n//             <Sos displayCoordinates={displayCoordinates} />\r\n//             <ToastContainer />\r\n//         </>\r\n//     );\r\n// }\r\n\r\n// export default MapComponent;\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport Navbar from './Navbar';\r\nimport Sos from './Sos';\r\nimport axios from 'axios';\r\nimport L from 'leaflet';\r\nimport 'leaflet-routing-machine';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst MapComponent = () => {\r\n    const mapRef = useRef(null);\r\n    const [data, setData] = useState({});\r\n    const [error, setError] = useState(null);\r\n    const [sourceCoordinates, setSourceCoordinates] = useState(null);\r\n    const [destinationCoordinates, setDestinationCoordinates] = useState(null);\r\n    const [routingControl, setRoutingControl] = useState(null); \r\n    const [isNavigated, setIsNavigated] = useState(false); \r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const response = await axios.post('http://localhost:5000/auth/viewtripbyid', { id: location.state.id });\r\n            setData(response.data);\r\n\r\n            if (response.data.sourceStation && response.data.destinationStation) {\r\n                const sourceResult = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${response.data.sourceStation}`);\r\n                const destinationResult = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${response.data.destinationStation}`);\r\n                if (sourceResult.data.length > 0 && destinationResult.data.length > 0) {\r\n                    setSourceCoordinates([parseFloat(sourceResult.data[0].lat), parseFloat(sourceResult.data[0].lon)]);\r\n                    setDestinationCoordinates([parseFloat(destinationResult.data[0].lat), parseFloat(destinationResult.data[0].lon)]);\r\n                } else {\r\n                    setError(\"Source or destination coordinates not found\");\r\n                }\r\n            }\r\n        } catch (error) {\r\n            setError(error.message);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [location.state.id]);\r\n\r\n    useEffect(() => {\r\n        if (sourceCoordinates && destinationCoordinates) {\r\n            if (!mapRef.current) {\r\n                mapRef.current = L.map('map').setView(sourceCoordinates, 11);\r\n                const mapLink = \"<a href='http://openstreetmap.org'>OpenStreetMap</a>\";\r\n                L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\r\n                    attribution: 'Leaflet &copy; ' + mapLink + ', contribution',\r\n                    maxZoom: 18\r\n                }).addTo(mapRef.current);\r\n            }\r\n\r\n            const map = mapRef.current;\r\n\r\n            // Add polyline to show shortest road between source and destination\r\n            const control = L.Routing.control({\r\n                waypoints: [\r\n                    L.latLng(sourceCoordinates),\r\n                    L.latLng(destinationCoordinates)\r\n                ],\r\n                routeWhileDragging: true,\r\n                lineOptions: {\r\n                    styles: [{ color: 'red', opacity: 0.7, weight: 5 }]\r\n                },\r\n                createMarker: function () { return null; }\r\n            });\r\n            setRoutingControl(control.addTo(map));\r\n\r\n            // Add marker for source and destination\r\n            L.marker(sourceCoordinates).addTo(map)\r\n                .bindPopup(`<b>Source:</b> ${data.sourceStation}`);\r\n\r\n            L.marker(destinationCoordinates).addTo(map)\r\n                .bindPopup(`<b>Destination:</b> ${data.destinationStation}`);\r\n\r\n            map.fitBounds([sourceCoordinates, destinationCoordinates]);\r\n        }\r\n    }, [sourceCoordinates, destinationCoordinates]);\r\n\r\n    useEffect(() => {\r\n        if (routingControl) {\r\n            // Animate user icon marker along the route\r\n            routingControl.on('routesfound', function (e) {\r\n                const route = e.routes[0];\r\n                const index = 0;\r\n                const segment = route.coordinates[index];\r\n                moveMarker(segment, index + 1, route);\r\n            });\r\n        }\r\n    }, [routingControl]);\r\n\r\n    const displayCoordinates = async () => {\r\n        if (userIconMarker) {\r\n            const coordinates = userIconMarker.getLatLng();\r\n            const response = await axios.get(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${coordinates.lat}&lon=${coordinates.lng}`);\r\n            const placeInfo = response.data.address;\r\n            const stateDistrict = placeInfo.state_district;\r\n            \r\n            try {\r\n                const userId = data._id;\r\n                await axios.post('http://localhost:5000/auth/submitalert', {\r\n                    userId: userId,\r\n                    coordinates: {\r\n                        stateDistrict: stateDistrict \r\n                    },\r\n\r\n                });\r\n            } catch (error) {\r\n                console.error('Error saving SOS request:', error);\r\n            }\r\n\t\t\tsetIsNavigated(true);\r\n            alert(`You are in ${stateDistrict}. Help will arrive in a few minutes.`);\r\n            navigate('/userhelp', { state: { data } });\r\n\r\n        }\r\n    };\r\n\r\n    let userIconMarker = null; // Declaring userIconMarker outside useEffect\r\n\r\n    async function moveMarker(segment, index, route) {\r\n        setTimeout(async function () {\r\n            if (!isNavigated) {\r\n                if (!userIconMarker) {\r\n                    const userIcon = L.icon({\r\n                        iconUrl: data.photo,\r\n                        iconSize: [40, 40],\r\n                    });\r\n                    userIconMarker = L.marker(L.latLng(segment.lat, segment.lng), { icon: userIcon }).addTo(mapRef.current);\r\n                } else {\r\n                    userIconMarker.setLatLng(L.latLng(segment.lat, segment.lng));\r\n                }\r\n                if (index < route.coordinates.length) {\r\n                    moveMarker(route.coordinates[index], index + 1, route);\r\n                } else {\r\n                    try {\r\n\t\t\t\t\t\tif (!destinationReached) {\r\n\t\t\t\t\t\t\ttoast.success(\"You have reached the destination successfully!\", {\r\n\t\t\t\t\t\t\t\ttoastId: 'destinationToast',\r\n\t\t\t\t\t\t\t\tonClose: async () => {\r\n\t\t\t\t\t\t\t\t\tdestinationReached = true;\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tconst userId = data._id;\r\n\t\t\t\t\t\t\t\t\t\tawait axios.post('http://localhost:5000/auth/submitstatus', {\r\n\t\t\t\t\t\t\t\t\t\t\tuserId: userId,\r\n\t\t\t\t\t\t\t\t\t\t\ttripStatus: 1\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"Navigating to '/userhistory'...\");\r\n\t\t\t\t\t\t\t\t\t\tnavigate('/userhistory');\r\n\t\t\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tdestinationReached = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n                    } catch (error) {\r\n                        console.error(error);\r\n                    }  \r\n                }\r\n            }\r\n        }, 2); \r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <div>\r\n                {error ? (\r\n                    <div>Error: {error}</div>\r\n                ) : (\r\n                    <div id=\"map\" style={{ width: '100%', height: '100vh' }}></div>\r\n                )}\r\n            </div>\r\n            <Sos displayCoordinates={displayCoordinates} />\r\n            <ToastContainer />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default MapComponent;\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAOA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,GAAG,MAAM,OAAO;AACvB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,yBAAyB;AAChC,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,SAASC,cAAc,EAAEC,KAAK,QAAQ,gBAAgB;AACtD,OAAO,uCAAuC;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE/C,MAAMC,YAAY,GAAGA,CA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}